# 数据库迁移说明
## 创建数据库
```sql
CREATE DATABASE teaching_evaluation_system 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;
```

**有文件直接执行`alembic upgrade head`**


一般执行以上命令即可迁移数据库
---

| 初始化 Alembic（首次用） | `alembic init alembic`                          | 在项目根目录执行，生成 `alembic/` 目录和 `alembic.ini` 配置文件 |
| ------------------------ | ----------------------------------------------- | ------------------------------------------------------------ |
| 生成迁移脚本             | `alembic revision --autogenerate -m "备注信息"` | 对比模型与数据库结构，自动生成迁移脚本（备注清晰描述变更，如「init users table」） |
| 执行迁移（升级到最新）   | `alembic upgrade head`                          | 将迁移脚本应用到数据库，创建 / 修改表结构（`head` 表示最新版本） |
| 升级到指定版本           | `alembic upgrade <revision_id>`                 | 替换 `<revision_id>` 为迁移脚本的版本 ID（如 `123456abcdef`） |
| 回滚上一版本             | `alembic downgrade -1`                          | 撤销上一次的迁移变更（生产环境慎用，需先备份数据）           |
| 回滚到指定版本           | `alembic downgrade <revision_id>`               | 回滚到指定迁移版本，可回滚到初始状态（`alembic downgrade base`） |
| 查看迁移历史             | `alembic history`                               | 查看所有迁移版本记录，便于追溯和版本切换                     |
| 查看当前迁移版本         | `alembic current`                               | 查看数据库当前对应的迁移版本，确认迁移是否生效               |
